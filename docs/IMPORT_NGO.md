# Инструкция по импорту НКО из Google таблицы

## Способ 1: Через CSV (рекомендуется)

### Шаг 1: Экспорт из Google таблицы

1. Откройте Google таблицу: https://docs.google.com/spreadsheets/d/1SBLDBi1GsbH7euH4RS3y6Deucbzt2nWQ/edit
2. Перейдите в меню: **File → Download → Comma-separated values (.csv)**
3. Сохраните файл как `organizations_data.csv`

### Шаг 2: Импорт в базу данных

```bash
cd backend
# Скопируйте CSV файл в папку backend
cp ~/Downloads/organizations_data.csv organizations_data.csv

# Запустите импорт
python manage.py import_ngo_from_csv --file organizations_data.csv

# Или сначала посмотрите что будет импортировано (dry-run)
python manage.py import_ngo_from_csv --file organizations_data.csv --dry-run
```

### Формат данных в CSV

Скрипт ожидает следующий формат:
- **Колонка A (0)**: Деятельность НКО / Категория
- **Колонка B (1)**: Название организации
- **Колонка C (2)**: Про организацию (описание)
- **Колонка D (3)**: Ссылка на социальные сети (VK)

### Маппинг городов

Скрипт автоматически определяет город по названию организации или описанию:

| В таблице | В БД (slug) |
|-----------|-------------|
| Ангарск | angarsk |
| Волгодонск | volgodonsk |
| Глазов, УР | glazov |
| Железногорск, Краснояр. край | zheleznogorsk |
| Зеленогорск, Краснояр. край | zelenogorsk |
| Нижний Новгород | nizhny-novgorod |
| Обнинск, Калуж. обл. | obninsk |
| Омск | omsk |
| Северск, Том. обл. | seversk |
| Снежинск | snezhinsk |
| Усолье-Сибирское | usolye-sibirskoe |
| Озёрск, Челяб. обл. | ozersk |

Если город не найден, будет использован первый город из БД.

### Маппинг категорий

| В таблице | В БД |
|-----------|------|
| Местное сообщество и развитие территорий | Местное сообщество |
| Экология | Экология |
| Культура и искусство | Культура |
| Образование | Образование |
| Спорт | Спорт |
| Социальная помощь | Социальная помощь |
| Здоровье | Здоровье |

Если категория не найдена, она будет создана автоматически.

## Способ 2: Прямой импорт через Google Sheets API (опционально)

Для прямого импорта из Google таблицы можно использовать Google Sheets API, но это требует настройки OAuth и API ключей.

## Результат импорта

После импорта:
- Все НКО будут созданы со статусом "Опубликовано"
- Автоматически будут определены города и категории
- VK ссылки будут извлечены из колонки "Ссылка на социальные сети"
- Описание будет взято из колонки "Про организацию"

## Обработка ошибок

Скрипт пропустит строки, где:
- Нет названия организации
- Не удалось определить город
- Организация с таким названием уже существует

Все ошибки будут выведены в консоль.

## Пример использования

```bash
# 1. Экспортируйте CSV из Google таблицы
# 2. Сохраните в backend/organizations_data.csv

# 3. Проверьте что будет импортировано
python manage.py import_ngo_from_csv --dry-run

# 4. Импортируйте
python manage.py import_ngo_from_csv

# Результат:
# ✓ Создано: ОО ТОС АГО "12а микрорайон" в Ангарск
# ✓ Создано: ... (и так далее)
# 
# ==================================================
# Импортировано: 45
# Пропущено: 3
# Ошибок: 0
```

